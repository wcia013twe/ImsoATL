{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/wes/Desktop/Project/ImsoATL/app/frontend/components/DashboardHeader.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\n\nexport default function DashboardHeader({\n  onToggleChat,\n  cityName\n}: {\n  onToggleChat: () => void;\n  cityName?: string;\n}) {\n  const [darkMode, setDarkMode] = useState(true);\n\n  const toggleDarkMode = () => {\n    setDarkMode(!darkMode);\n    // You can add actual dark mode toggle logic here\n  };\n\n  const handleExport = (format: 'pdf' | 'csv' | 'kml') => {\n    console.log(`Exporting as ${format}...`);\n    // Export logic will be implemented later\n  };\n\n  return (\n    <header className=\"sticky top-0 z-50 border-b border-border bg-surface/95 backdrop-blur supports-[backdrop-filter]:bg-surface/80\">\n      <div className=\"flex items-center justify-between px-6 py-4\">\n        {/* Left: Logo/Title and Chat Toggle */}\n        <div className=\"flex items-center gap-4\">\n          <button\n            onClick={onToggleChat}\n            className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-civic-blue text-white font-semibold hover:bg-civic-blue-600 transition-colors\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\" />\n            </svg>\n            Atlas\n          </button>\n\n          <div className=\"text-foreground\">\n            <span className=\"font-semibold text-lg\">{cityName || 'Select a City'}</span>\n            <span className=\"text-muted ml-2\">â€¢ WiFi Planning Dashboard</span>\n          </div>\n        </div>\n\n        {/* Right: Export Tools and Dark Mode Toggle */}\n        <div className=\"flex items-center gap-3\">\n          {/* Export Buttons */}\n          <div className=\"flex items-center gap-2 mr-4\">\n            <span className=\"text-sm text-muted font-medium mr-2\">Export:</span>\n            <button\n              onClick={() => handleExport('pdf')}\n              className=\"px-3 py-1.5 rounded-lg border border-border text-sm font-medium text-foreground hover:bg-surface-hover transition-colors\"\n            >\n              PDF\n            </button>\n            <button\n              onClick={() => handleExport('csv')}\n              className=\"px-3 py-1.5 rounded-lg border border-border text-sm font-medium text-foreground hover:bg-surface-hover transition-colors\"\n            >\n              CSV\n            </button>\n            <button\n              onClick={() => handleExport('kml')}\n              className=\"px-3 py-1.5 rounded-lg border border-border text-sm font-medium text-foreground hover:bg-surface-hover transition-colors\"\n            >\n              KML\n            </button>\n          </div>\n\n          {/* Dark Mode Toggle */}\n          <button\n            onClick={toggleDarkMode}\n            className=\"p-2 rounded-lg border border-border hover:bg-surface-hover transition-colors\"\n            aria-label=\"Toggle dark mode\"\n          >\n            {darkMode ? (\n              <svg className=\"w-5 h-5 text-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z\" />\n              </svg>\n            ) : (\n              <svg className=\"w-5 h-5 text-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\n              </svg>\n            )}\n          </button>\n        </div>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAIe,SAAS,gBAAgB,EACtC,YAAY,EACZ,QAAQ,EAIT;;IACC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IAEzC,MAAM,iBAAiB;QACrB,YAAY,CAAC;IACb,iDAAiD;IACnD;IAEA,MAAM,eAAe,CAAC;QACpB,QAAQ,GAAG,CAAC,CAAC,aAAa,EAAE,OAAO,GAAG,CAAC;IACvC,yCAAyC;IAC3C;IAEA,qBACE,6LAAC;QAAO,WAAU;kBAChB,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,SAAS;4BACT,WAAU;;8CAEV,6LAAC;oCAAI,WAAU;oCAAU,MAAK;oCAAO,QAAO;oCAAe,SAAQ;8CACjE,cAAA,6LAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;gCACjE;;;;;;;sCAIR,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAK,WAAU;8CAAyB,YAAY;;;;;;8CACrD,6LAAC;oCAAK,WAAU;8CAAkB;;;;;;;;;;;;;;;;;;8BAKtC,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAK,WAAU;8CAAsC;;;;;;8CACtD,6LAAC;oCACC,SAAS,IAAM,aAAa;oCAC5B,WAAU;8CACX;;;;;;8CAGD,6LAAC;oCACC,SAAS,IAAM,aAAa;oCAC5B,WAAU;8CACX;;;;;;8CAGD,6LAAC;oCACC,SAAS,IAAM,aAAa;oCAC5B,WAAU;8CACX;;;;;;;;;;;;sCAMH,6LAAC;4BACC,SAAS;4BACT,WAAU;4BACV,cAAW;sCAEV,yBACC,6LAAC;gCAAI,WAAU;gCAA0B,MAAK;gCAAO,QAAO;gCAAe,SAAQ;0CACjF,cAAA,6LAAC;oCAAK,eAAc;oCAAQ,gBAAe;oCAAQ,aAAa;oCAAG,GAAE;;;;;;;;;;qDAGvE,6LAAC;gCAAI,WAAU;gCAA0B,MAAK;gCAAO,QAAO;gCAAe,SAAQ;0CACjF,cAAA,6LAAC;oCAAK,eAAc;oCAAQ,gBAAe;oCAAQ,aAAa;oCAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQrF;GArFwB;KAAA"}},
    {"offset": {"line": 219, "column": 0}, "map": {"version":3,"sources":["file:///Users/wes/Desktop/Project/ImsoATL/app/frontend/components/ChatSidebar.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport type { ChatMessage, AgentStep, WebSocketMessage, DeploymentPlan } from '@/lib/types';\n\nconst WEBSOCKET_URL = 'ws://localhost:8000/ws/chat';\nconst STORAGE_KEY = 'atlas-chat-messages';\n\nconst getInitialMessages = (): ChatMessage[] => {\n  if (typeof window === 'undefined') return getDefaultMessages();\n\n  try {\n    const stored = localStorage.getItem(STORAGE_KEY);\n    if (stored) {\n      const parsed = JSON.parse(stored);\n      // Convert timestamp strings back to Date objects\n      const messagesWithDates = parsed.map((msg: any) => ({\n        ...msg,\n        timestamp: new Date(msg.timestamp)\n      }));\n      return messagesWithDates.length > 0 ? messagesWithDates : getDefaultMessages();\n    }\n  } catch (error) {\n    console.error('Error loading chat messages:', error);\n  }\n\n  return getDefaultMessages();\n};\n\nconst getDefaultMessages = (): ChatMessage[] => [\n  {\n    id: '1',\n    role: 'assistant',\n    content: \"Hi! I'm your WiFi planning assistant powered by multi-agent AI. I analyze Census demographics, FCC broadband data, and civic assets to recommend optimal deployment sites. Ask me anything!\",\n    timestamp: new Date()\n  }\n];\n\nexport default function ChatSidebar({\n  isOpen,\n  onClose,\n  cityName,\n  onRecommendationsReceived\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n  cityName?: string;\n  onRecommendationsReceived?: (plan: DeploymentPlan) => void;\n}) {\n  const [messages, setMessages] = useState<ChatMessage[]>(getInitialMessages);\n  const [inputValue, setInputValue] = useState('');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [showSuggestions, setShowSuggestions] = useState(true);\n  const [typingStep, setTypingStep] = useState<AgentStep | null>(null);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const wsRef = useRef<WebSocket | null>(null);\n  const typingTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  const suggestions = [\n    \"Where should we deploy WiFi for underserved students?\",\n    \"Which areas have the worst broadband coverage gaps?\",\n    \"Show me high-poverty neighborhoods without internet access\",\n    \"Find the best sites near libraries and community centers\"\n  ];\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages, typingStep]);\n\n  useEffect(() => {\n    if (isOpen && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isOpen]);\n\n  // Persist messages to localStorage whenever they change\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      try {\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(messages));\n      } catch (error) {\n        console.error('Error saving chat messages:', error);\n      }\n    }\n  }, [messages]);\n\n  const connectWebSocket = (userMessage: string) => {\n    const ws = new WebSocket(WEBSOCKET_URL);\n    wsRef.current = ws;\n    const processingMessageId = `processing-${Date.now()}`;\n\n    ws.onopen = () => {\n      console.log('WebSocket connected');\n\n      // Create ONE processing message that will accumulate all steps\n      const thinkingMessage: ChatMessage = {\n        id: processingMessageId,\n        role: 'assistant',\n        content: 'ðŸ¤” Analyzing your request...',\n        timestamp: new Date(),\n        type: 'processing',\n        agentSteps: []  // Initialize empty array for accumulation\n      };\n      setMessages(prev => [...prev, thinkingMessage]);\n\n      // Send user message to backend\n      ws.send(JSON.stringify({\n        message: userMessage,\n        city: cityName || 'Atlanta'\n      }));\n    };\n\n    ws.onmessage = (event) => {\n      const data: WebSocketMessage = JSON.parse(event.data);\n\n      if (data.type === 'agent_step') {\n        const agentStep: AgentStep = {\n          agent: data.agent || '',\n          action: data.action || '',\n          status: data.status || 'in_progress',\n          data: data.data\n        };\n\n        // UPDATE the existing processing message by accumulating steps\n        setMessages(prev => prev.map(msg => {\n          if (msg.id === processingMessageId) {\n            const existingSteps = msg.agentSteps || [];\n            return {\n              ...msg,\n              agentSteps: [...existingSteps, agentStep],\n              content: `processing-${Date.now()}`,  // Change content to force re-render\n              timestamp: new Date()  // Update timestamp to force re-render\n            };\n          }\n          return msg;\n        }));\n\n        // Show typing indicator for current agent\n        setTypingStep({\n          agent: agentStep.agent,\n          action: agentStep.action,\n          status: agentStep.status\n        });\n      } else if (data.type === 'final_response') {\n        // Clear typing indicator\n        setTypingStep(null);\n\n        // Replace processing message with final response\n        setMessages(prev => prev.map(msg =>\n          msg.id === processingMessageId\n            ? {\n                ...msg,\n                content: data.explanation || 'Analysis complete.',\n                type: 'final_response',\n                deploymentPlan: data.deployment_plan\n              }\n            : msg\n        ));\n\n        setIsProcessing(false);\n\n        // Notify parent component of recommendations\n        if (data.deployment_plan && onRecommendationsReceived) {\n          onRecommendationsReceived(data.deployment_plan);\n        }\n\n        ws.close();\n      } else if (data.type === 'error') {\n        // Clear typing indicator\n        setTypingStep(null);\n\n        // Replace processing message with error\n        setMessages(prev => prev.map(msg =>\n          msg.id === processingMessageId\n            ? {\n                ...msg,\n                content: `âš ï¸ Error: ${data.message || 'An error occurred'}`,\n                type: 'error'\n              }\n            : msg\n        ));\n\n        setIsProcessing(false);\n        ws.close();\n      }\n    };\n\n    ws.onerror = (error) => {\n      console.error('WebSocket error:', error);\n      setTypingStep(null);\n\n      const errorMessage: ChatMessage = {\n        id: Date.now().toString(),\n        role: 'assistant',\n        content: 'âš ï¸ Connection error. Please make sure the backend server is running on port 8000.',\n        timestamp: new Date(),\n        type: 'error'\n      };\n      setMessages(prev => [...prev, errorMessage]);\n      setIsProcessing(false);\n    };\n\n    ws.onclose = () => {\n      console.log('WebSocket disconnected');\n      wsRef.current = null;\n    };\n  };\n\n  const handleSendMessage = async (text?: string) => {\n    const messageText = text || inputValue.trim();\n    if (!messageText || isProcessing) return;\n\n    // Add user message\n    const userMessage: ChatMessage = {\n      id: Date.now().toString(),\n      role: 'user',\n      content: messageText,\n      timestamp: new Date()\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n    setInputValue('');\n    setShowSuggestions(false);\n    setIsProcessing(true);\n\n    // Connect to WebSocket and send message\n    connectWebSocket(messageText);\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const handleClearConversation = () => {\n    if (confirm('Are you sure you want to clear the conversation history?')) {\n      const defaultMessages = getDefaultMessages();\n      setMessages(defaultMessages);\n      setShowSuggestions(true);\n      if (typeof window !== 'undefined') {\n        localStorage.removeItem(STORAGE_KEY);\n      }\n    }\n  };\n\n  const getAgentIcon = (agentName: string): string => {\n    if (agentName.includes('Query Parser')) return 'ðŸ”';\n    if (agentName.includes('Census')) return 'ðŸ“Š';\n    if (agentName.includes('FCC')) return 'ðŸ“¡';\n    if (agentName.includes('Assets')) return 'ðŸ›ï¸';\n    if (agentName.includes('Synthesis')) return 'ðŸ§ ';\n    if (agentName.includes('Ranking')) return 'âš–ï¸';\n    if (agentName.includes('Explainer')) return 'âœ¨';\n    return 'ðŸ¤–';\n  };\n\n  const isOrchestratorThinking = (step: AgentStep): boolean => {\n    return step.agent.includes('Orchestrator') && step.status === 'completed';\n  };\n\n  const isProcessRunning = (step: AgentStep): boolean => {\n    return step.status === 'in_progress' && !step.agent.includes('Orchestrator');\n  };\n\n  return (\n    <>\n      {/* Sidebar */}\n      <div\n        className={`fixed top-0 left-0 h-full w-[32rem] bg-surface border-r border-border z-50 transform transition-transform duration-300 ease-in-out ${\n          isOpen ? 'translate-x-0' : '-translate-x-full'\n        }`}\n      >\n        <div className=\"flex flex-col h-full\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between px-6 py-4 border-b border-border\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-2 h-2 rounded-full bg-civic-green animate-pulse\" />\n              <h2 className=\"text-lg font-semibold text-foreground\">Multi-Agent AI Assistant</h2>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <button\n                onClick={handleClearConversation}\n                className=\"p-1 rounded-lg hover:bg-surface-hover transition-colors text-muted hover:text-foreground\"\n                title=\"Clear conversation\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                </svg>\n              </button>\n              <button\n                onClick={onClose}\n                className=\"p-1 rounded-lg hover:bg-surface-hover transition-colors text-muted hover:text-foreground\"\n                title=\"Close chat\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          {/* Messages */}\n          <div className=\"flex-1 overflow-y-auto px-6 py-4 space-y-4\">\n            {messages.map((message) => (\n              <div\n                key={message.id}\n                className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}\n              >\n                <div\n                  className={`max-w-[90%] rounded-2xl px-4 py-3 ${\n                    message.role === 'user'\n                      ? 'bg-civic-blue text-white'\n                      : message.type === 'agent_step'\n                      ? 'bg-surface-hover border border-border'\n                      : 'bg-surface-hover text-foreground border border-border'\n                  }`}\n                >\n                  {/* Processing Message - Shows all accumulated agent steps */}\n                  {message.type === 'processing' && message.agentSteps && (\n                    <div className=\"text-xs space-y-2\">\n                      <div className=\"font-semibold text-muted mb-2\">ðŸ¤” Analyzing your request...</div>\n                      {message.agentSteps.map((step, idx) => (\n                        <div key={idx} className=\"flex items-start gap-2 pl-2 border-l-2 border-civic-blue/30\">\n                          <span className=\"flex-shrink-0 mt-0.5\">{getAgentIcon(step.agent)}</span>\n                          <div className=\"flex-1\">\n                            <div className=\"font-semibold text-foreground flex items-center gap-2\">\n                              {step.agent}\n                              {step.status === 'in_progress' && (\n                                <svg className=\"w-3 h-3 animate-spin text-civic-blue\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                                </svg>\n                              )}\n                              {step.status === 'completed' && (\n                                <span className=\"text-civic-green\">âœ“</span>\n                              )}\n                            </div>\n                            <div className=\"text-accent mt-0.5\">{step.action}</div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n\n                  {/* Agent Step Message */}\n                  {message.type === 'agent_step' && message.agentSteps?.[0] && (\n                    <div className=\"text-xs flex items-start gap-2\">\n                      <span className=\"flex-shrink-0 mt-0.5\">{getAgentIcon(message.agentSteps[0].agent)}</span>\n                      <div className=\"flex-1\">\n                        <div className=\"font-semibold text-foreground flex items-center gap-2\">\n                          {message.agentSteps[0].agent}\n                          {isProcessRunning(message.agentSteps[0]) && (\n                            <svg className=\"w-3 h-3 animate-spin text-civic-blue\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                              <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                              <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                            </svg>\n                          )}\n                          {message.agentSteps[0].status === 'completed' && !isOrchestratorThinking(message.agentSteps[0]) && (\n                            <span className=\"text-civic-green\">âœ“</span>\n                          )}\n                        </div>\n                        <div className=\"text-accent mt-1\">\n                          {message.content}\n                          {isOrchestratorThinking(message.agentSteps[0]) && (\n                            <span className=\"inline-flex ml-1\">\n                              <span className=\"animate-[bounce_1s_infinite_0ms]\">.</span>\n                              <span className=\"animate-[bounce_1s_infinite_200ms]\">.</span>\n                              <span className=\"animate-[bounce_1s_infinite_400ms]\">.</span>\n                            </span>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Regular Message */}\n                  {message.type !== \"agent_step\" && message.type !== \"processing\" && (\n                    <>\n                      <p className=\"text-sm leading-relaxed whitespace-pre-wrap\">{message.content}</p>\n\n                      <span className={`text-xs mt-2 block ${\n                        message.role === 'user' ? 'text-white/70' : 'text-muted'\n                      }`}>\n                        {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                      </span>\n                    </>\n                  )}\n                </div>\n              </div>\n            ))}\n\n            {/* Typing Indicator */}\n            {isProcessing && typingStep && (\n              <div className=\"flex justify-start\">\n                <div className=\"max-w-[90%] bg-surface-hover border border-border rounded-2xl px-4 py-3\">\n                  <div className=\"text-xs flex items-start gap-2\">\n                    <span className=\"flex-shrink-0 mt-0.5\">{getAgentIcon(typingStep.agent)}</span>\n                    <div className=\"flex-1\">\n                      <div className=\"font-semibold text-foreground\">{typingStep.agent}</div>\n                      <div className=\"text-accent mt-1\">\n                        <span className=\"inline-flex gap-0.5\">\n                          <span className=\"animate-[bounce_1s_infinite_0ms]\">.</span>\n                          <span className=\"animate-[bounce_1s_infinite_200ms]\">.</span>\n                          <span className=\"animate-[bounce_1s_infinite_400ms]\">.</span>\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div ref={messagesEndRef} />\n          </div>\n\n          {/* Suggestions */}\n          {showSuggestions && messages.length === 1 && (\n            <div className=\"px-6 pb-4\">\n              <div className=\"text-xs font-semibold text-muted uppercase tracking-wider mb-3\">\n                Suggested Questions\n              </div>\n              <div className=\"space-y-2\">\n                {suggestions.map((suggestion, index) => (\n                  <button\n                    key={index}\n                    onClick={() => handleSendMessage(suggestion)}\n                    className=\"w-full text-left px-3 py-2 rounded-lg border border-border text-sm text-accent hover:bg-surface-hover hover:text-foreground transition-colors\"\n                  >\n                    {suggestion}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Input */}\n          <div className=\"px-6 py-4 border-t border-border\">\n            <div className=\"flex gap-2\">\n              <input\n                ref={inputRef}\n                type=\"text\"\n                value={inputValue}\n                onChange={(e) => setInputValue(e.target.value)}\n                onKeyPress={handleKeyPress}\n                placeholder=\"Ask me about WiFi deployment...\"\n                disabled={isProcessing}\n                className=\"flex-1 px-4 py-3 rounded-xl bg-background border border-border text-foreground placeholder-muted focus:outline-none focus:ring-2 focus:ring-civic-blue focus:border-transparent disabled:opacity-50\"\n              />\n              <button\n                onClick={() => handleSendMessage()}\n                disabled={!inputValue.trim() || isProcessing}\n                className=\"px-4 py-3 rounded-xl bg-civic-blue text-white font-semibold hover:bg-civic-blue-600 transition-colors disabled:opacity-40 disabled:cursor-not-allowed\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1056, "column": 0}, "map": {"version":3,"sources":["file:///Users/wes/Desktop/Project/ImsoATL/app/frontend/lib/mapbox-config.ts"],"sourcesContent":["/**\n * Mapbox Configuration\n * Layer definitions, styles, and data sources\n */\n\nexport const MAPBOX_CONFIG = {\n  accessToken: process.env.NEXT_PUBLIC_MAPBOX_TOKEN || process.env.NEXT_PUBLIC_MAPBOX || '',\n  defaultStyle: 'mapbox://styles/mapbox/light-v11',\n  atlantaCenter: {\n    lng: -84.388,\n    lat: 33.749,\n    zoom: 10.5,\n  },\n};\n\nexport const MAP_LAYERS = {\n  // Atlanta city boundary\n  atlantaBoundary: {\n    id: 'atlanta-boundary',\n    type: 'line' as const,\n    source: 'atlanta-boundary',\n    paint: {\n      'line-color': '#2691FF',\n      'line-width': 3,\n      'line-opacity': 0.8,\n    },\n  },\n\n  // Census heat map - poverty rate\n  censusPoverty: {\n    id: 'census-poverty',\n    type: 'fill' as const,\n    source: 'census-poverty',\n    paint: {\n      'fill-color': [\n        'interpolate',\n        ['linear'],\n        ['get', 'poverty_rate'],\n        0, '#E8F8F3',\n        10, '#A3E3CF',\n        20, '#47C79F',\n        30, '#19B987',\n        40, '#0F6F51',\n      ],\n      'fill-opacity': 0.6,\n    },\n  },\n\n  // Census heat map - internet access\n  censusInternet: {\n    id: 'census-internet',\n    type: 'fill' as const,\n    source: 'census-internet',\n    paint: {\n      'fill-color': [\n        'interpolate',\n        ['linear'],\n        ['get', 'no_internet_pct'],\n        0, '#E8F4FF',\n        10, '#A8D3FF',\n        20, '#51A7FF',\n        30, '#2691FF',\n        40, '#0058B3',\n      ],\n      'fill-opacity': 0.6,\n    },\n  },\n\n  // FCC broadband coverage\n  fccBroadband: {\n    id: 'fcc-broadband',\n    type: 'fill' as const,\n    source: 'fcc-broadband',\n    paint: {\n      'fill-color': [\n        'match',\n        ['get', 'has_coverage'],\n        true, '#19B987',\n        false, '#FFB84D',\n        '#6B7280',\n      ],\n      'fill-opacity': 0.4,\n    },\n  },\n\n  // Local assets - libraries\n  libraries: {\n    id: 'libraries',\n    type: 'circle' as const,\n    source: 'libraries',\n    paint: {\n      'circle-radius': 8,\n      'circle-color': '#7C3AED',\n      'circle-stroke-width': 2,\n      'circle-stroke-color': '#FFFFFF',\n    },\n  },\n\n  // Local assets - community centers\n  communityCenters: {\n    id: 'community-centers',\n    type: 'circle' as const,\n    source: 'community-centers',\n    paint: {\n      'circle-radius': 8,\n      'circle-color': '#DC2626',\n      'circle-stroke-width': 2,\n      'circle-stroke-color': '#FFFFFF',\n    },\n  },\n\n  // Local assets - transit stops\n  transitStops: {\n    id: 'transit-stops',\n    type: 'circle' as const,\n    source: 'transit-stops',\n    paint: {\n      'circle-radius': 6,\n      'circle-color': '#7DBDFF',\n      'circle-stroke-width': 1,\n      'circle-stroke-color': '#FFFFFF',\n    },\n  },\n\n  // Candidate WiFi sites\n  candidateSites: {\n    id: 'candidate-sites',\n    type: 'circle' as const,\n    source: 'candidate-sites',\n    paint: {\n      'circle-radius': 12,\n      'circle-color': '#2691FF',\n      'circle-stroke-width': 3,\n      'circle-stroke-color': '#FFFFFF',\n    },\n  },\n\n  // Existing WiFi coverage\n  existingWifi: {\n    id: 'existing-wifi',\n    type: 'circle' as const,\n    source: 'existing-wifi',\n    paint: {\n      'circle-radius': 10,\n      'circle-color': '#6B7280',\n      'circle-stroke-width': 2,\n      'circle-stroke-color': '#FFFFFF',\n      'circle-opacity': 0.7,\n    },\n  },\n};\n\nexport const LAYER_GROUPS = {\n  'Census Data': ['census-poverty', 'census-internet'],\n  'FCC Coverage': ['fcc-broadband'],\n  'Local Assets': ['libraries', 'community-centers', 'transit-stops'],\n  'WiFi Sites': ['candidate-sites', 'existing-wifi'],\n  'Boundaries': ['atlanta-boundary'],\n};\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;AAGc;AADR,MAAM,gBAAgB;IAC3B,aAAa,qIAAwC,2KAAO,CAAC,GAAG,CAAC,kBAAkB,IAAI;IACvF,cAAc;IACd,eAAe;QACb,KAAK,CAAC;QACN,KAAK;QACL,MAAM;IACR;AACF;AAEO,MAAM,aAAa;IACxB,wBAAwB;IACxB,iBAAiB;QACf,IAAI;QACJ,MAAM;QACN,QAAQ;QACR,OAAO;YACL,cAAc;YACd,cAAc;YACd,gBAAgB;QAClB;IACF;IAEA,iCAAiC;IACjC,eAAe;QACb,IAAI;QACJ,MAAM;QACN,QAAQ;QACR,OAAO;YACL,cAAc;gBACZ;gBACA;oBAAC;iBAAS;gBACV;oBAAC;oBAAO;iBAAe;gBACvB;gBAAG;gBACH;gBAAI;gBACJ;gBAAI;gBACJ;gBAAI;gBACJ;gBAAI;aACL;YACD,gBAAgB;QAClB;IACF;IAEA,oCAAoC;IACpC,gBAAgB;QACd,IAAI;QACJ,MAAM;QACN,QAAQ;QACR,OAAO;YACL,cAAc;gBACZ;gBACA;oBAAC;iBAAS;gBACV;oBAAC;oBAAO;iBAAkB;gBAC1B;gBAAG;gBACH;gBAAI;gBACJ;gBAAI;gBACJ;gBAAI;gBACJ;gBAAI;aACL;YACD,gBAAgB;QAClB;IACF;IAEA,yBAAyB;IACzB,cAAc;QACZ,IAAI;QACJ,MAAM;QACN,QAAQ;QACR,OAAO;YACL,cAAc;gBACZ;gBACA;oBAAC;oBAAO;iBAAe;gBACvB;gBAAM;gBACN;gBAAO;gBACP;aACD;YACD,gBAAgB;QAClB;IACF;IAEA,2BAA2B;IAC3B,WAAW;QACT,IAAI;QACJ,MAAM;QACN,QAAQ;QACR,OAAO;YACL,iBAAiB;YACjB,gBAAgB;YAChB,uBAAuB;YACvB,uBAAuB;QACzB;IACF;IAEA,mCAAmC;IACnC,kBAAkB;QAChB,IAAI;QACJ,MAAM;QACN,QAAQ;QACR,OAAO;YACL,iBAAiB;YACjB,gBAAgB;YAChB,uBAAuB;YACvB,uBAAuB;QACzB;IACF;IAEA,+BAA+B;IAC/B,cAAc;QACZ,IAAI;QACJ,MAAM;QACN,QAAQ;QACR,OAAO;YACL,iBAAiB;YACjB,gBAAgB;YAChB,uBAAuB;YACvB,uBAAuB;QACzB;IACF;IAEA,uBAAuB;IACvB,gBAAgB;QACd,IAAI;QACJ,MAAM;QACN,QAAQ;QACR,OAAO;YACL,iBAAiB;YACjB,gBAAgB;YAChB,uBAAuB;YACvB,uBAAuB;QACzB;IACF;IAEA,yBAAyB;IACzB,cAAc;QACZ,IAAI;QACJ,MAAM;QACN,QAAQ;QACR,OAAO;YACL,iBAAiB;YACjB,gBAAgB;YAChB,uBAAuB;YACvB,uBAAuB;YACvB,kBAAkB;QACpB;IACF;AACF;AAEO,MAAM,eAAe;IAC1B,eAAe;QAAC;QAAkB;KAAkB;IACpD,gBAAgB;QAAC;KAAgB;IACjC,gBAAgB;QAAC;QAAa;QAAqB;KAAgB;IACnE,cAAc;QAAC;QAAmB;KAAgB;IAClD,cAAc;QAAC;KAAmB;AACpC"}},
    {"offset": {"line": 1258, "column": 0}, "map": {"version":3,"sources":["file:///Users/wes/Desktop/Project/ImsoATL/app/frontend/components/MapLayerControl.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\n\ntype LayerControlProps = {\n  layers: {\n    id: string;\n    label: string;\n    color: string;\n    description?: string;\n  }[];\n  activeLayers: string[];\n  onToggle: (layerId: string) => void;\n};\n\nexport default function MapLayerControl({\n  layers,\n  activeLayers,\n  onToggle,\n}: LayerControlProps) {\n  const [isExpanded, setIsExpanded] = useState(true);\n\n  return (\n    <div className=\"absolute top-4 right-4 bg-surface rounded-lg shadow-lg max-w-xs z-10 border border-border\">\n      {/* Header with Toggle */}\n      <div className=\"flex items-center justify-between px-4 py-3 border-b border-border\">\n        <h3 className=\"text-sm font-semibold text-foreground\">Map Layers</h3>\n        <button\n          onClick={() => setIsExpanded(!isExpanded)}\n          className=\"p-1 rounded-lg hover:bg-surface-hover transition-colors text-muted hover:text-foreground\"\n          title={isExpanded ? 'Hide map key' : 'Show map key'}\n        >\n          <svg\n            className={`w-4 h-4 transition-transform ${isExpanded ? 'rotate-180' : ''}`}\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n          </svg>\n        </button>\n      </div>\n\n      {/* Collapsible Content */}\n      {isExpanded && (\n        <div className=\"p-4 space-y-2\">\n          {layers.map((layer) => (\n            <button\n              key={layer.id}\n              onClick={() => onToggle(layer.id)}\n              className=\"w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors hover:bg-surface-hover\"\n            >\n              <div\n                className=\"w-4 h-4 rounded shrink-0 border-2\"\n                style={{\n                  backgroundColor: activeLayers.includes(layer.id) ? layer.color : 'transparent',\n                  borderColor: layer.color,\n                }}\n              />\n              <div className=\"flex-1 text-left\">\n                <div className=\"text-sm font-medium text-foreground\">{layer.label}</div>\n                {layer.description && (\n                  <div className=\"text-xs text-muted\">{layer.description}</div>\n                )}\n              </div>\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAee,SAAS,gBAAgB,EACtC,MAAM,EACN,YAAY,EACZ,QAAQ,EACU;;IAClB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAwC;;;;;;kCACtD,6LAAC;wBACC,SAAS,IAAM,cAAc,CAAC;wBAC9B,WAAU;wBACV,OAAO,aAAa,iBAAiB;kCAErC,cAAA,6LAAC;4BACC,WAAW,CAAC,6BAA6B,EAAE,aAAa,eAAe,IAAI;4BAC3E,MAAK;4BACL,QAAO;4BACP,SAAQ;sCAER,cAAA,6LAAC;gCAAK,eAAc;gCAAQ,gBAAe;gCAAQ,aAAa;gCAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;YAM1E,4BACC,6LAAC;gBAAI,WAAU;0BACZ,OAAO,GAAG,CAAC,CAAC,sBACX,6LAAC;wBAEC,SAAS,IAAM,SAAS,MAAM,EAAE;wBAChC,WAAU;;0CAEV,6LAAC;gCACC,WAAU;gCACV,OAAO;oCACL,iBAAiB,aAAa,QAAQ,CAAC,MAAM,EAAE,IAAI,MAAM,KAAK,GAAG;oCACjE,aAAa,MAAM,KAAK;gCAC1B;;;;;;0CAEF,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;kDAAuC,MAAM,KAAK;;;;;;oCAChE,MAAM,WAAW,kBAChB,6LAAC;wCAAI,WAAU;kDAAsB,MAAM,WAAW;;;;;;;;;;;;;uBAdrD,MAAM,EAAE;;;;;;;;;;;;;;;;AAuB3B;GAxDwB;KAAA"}},
    {"offset": {"line": 1391, "column": 0}, "map": {"version":3,"sources":["file:///Users/wes/Desktop/Project/ImsoATL/app/frontend/components/InteractiveMap.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport * as turf from '@turf/turf';\nimport { MAPBOX_CONFIG, MAP_LAYERS } from '@/lib/mapbox-config';\nimport MapLayerControl from './MapLayerControl';\nimport type { DeploymentPlan } from '@/lib/types';\n\n// Mock data sources - replace with real data in backend integration\nconst MOCK_DATA = {\n  atlantaBoundary: {\n    type: 'FeatureCollection' as const,\n    features: [\n      {\n        type: 'Feature' as const,\n        geometry: {\n          type: 'Polygon' as const,\n          coordinates: [[\n            [-84.55, 33.65],\n            [-84.55, 33.89],\n            [-84.29, 33.89],\n            [-84.29, 33.65],\n            [-84.55, 33.65],\n          ]],\n        },\n        properties: {},\n      },\n    ],\n  },\n  libraries: {\n    type: 'FeatureCollection' as const,\n    features: [\n      {\n        type: 'Feature' as const,\n        geometry: { type: 'Point' as const, coordinates: [-84.408, 33.749] },\n        properties: { name: 'Central Library', type: 'library' },\n      },\n      {\n        type: 'Feature' as const,\n        geometry: { type: 'Point' as const, coordinates: [-84.428, 33.738] },\n        properties: { name: 'Southwest Library', type: 'library' },\n      },\n    ],\n  },\n  candidateSites: {\n    type: 'FeatureCollection' as const,\n    features: [\n      {\n        type: 'Feature' as const,\n        geometry: { type: 'Point' as const, coordinates: [-84.408, 33.755] },\n        properties: { name: 'Candidate Site 1', reach: 2200, equityScore: 9.2 },\n      },\n    ],\n  },\n};\n\nconst LAYER_CONFIG = [\n  { id: 'atlanta-boundary', label: 'Atlanta Boundary', color: '#2691FF' },\n  { id: 'census-poverty', label: 'Poverty Rate', color: '#19B987', description: 'Census tract poverty data' },\n  { id: 'census-internet', label: 'Internet Access', color: '#2691FF', description: 'Households without internet' },\n  { id: 'fcc-broadband', label: 'FCC Coverage', color: '#FFB84D', description: 'Federal broadband data' },\n  { id: 'libraries', label: 'Libraries', color: '#7C3AED' },\n  { id: 'community-centers', label: 'Community Centers', color: '#DC2626' },\n  { id: 'transit-stops', label: 'Transit Stops', color: '#7DBDFF' },\n  { id: 'candidate-sites', label: 'Candidate Sites', color: '#2691FF' },\n  { id: 'existing-wifi', label: 'Existing WiFi', color: '#6B7280' },\n];\n\nexport default function InteractiveMap({\n  cityCenter,\n  cityName,\n  recommendations\n}: {\n  cityCenter?: [number, number];\n  cityName?: string;\n  recommendations?: DeploymentPlan | null;\n}) {\n  const mapContainer = useRef<HTMLDivElement>(null);\n  const map = useRef<mapboxgl.Map | null>(null);\n  const [activeLayers, setActiveLayers] = useState<string[]>([\n    'atlanta-boundary',\n    'libraries',\n    'candidate-sites',\n  ]);\n  const [mapLoaded, setMapLoaded] = useState(false);\n\n  // Use provided city coordinates or default to Atlanta\n  const mapCenter = cityCenter || [MAPBOX_CONFIG.atlantaCenter.lng, MAPBOX_CONFIG.atlantaCenter.lat];\n  const mapZoom = cityCenter ? 11.5 : MAPBOX_CONFIG.atlantaCenter.zoom;\n\n  // Initialize map\n  useEffect(() => {\n    if (!mapContainer.current || map.current) return;\n\n    mapboxgl.accessToken = MAPBOX_CONFIG.accessToken;\n\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: MAPBOX_CONFIG.defaultStyle,\n      center: mapCenter,\n      zoom: mapZoom,\n    });\n\n    map.current.on('load', () => {\n      if (!map.current) return;\n\n      // Load pre-generated Atlanta boundary (2.3KB instead of 58MB!)\n      fetch('/data/cities/atlanta.json')\n        .then(response => response.json())\n        .then(atlantaBoundary => {\n          if (!map.current) return;\n\n          console.log('Loaded pre-generated Atlanta boundary');\n\n          // Add Atlanta boundary source with pre-processed boundary\n          map.current.addSource('atlanta-boundary', {\n            type: 'geojson',\n            data: {\n              type: 'FeatureCollection' as const,\n              features: [atlantaBoundary]\n            },\n          });\n\n          // Add the clean outer boundary layer\n          map.current.addLayer({\n            id: 'atlanta-boundary',\n            type: 'line',\n            source: 'atlanta-boundary',\n            paint: {\n              'line-color': '#2691FF',\n              'line-width': 3,\n              'line-opacity': 0.8,\n            },\n          });\n\n          // Auto-zoom map to fit Atlanta boundary perfectly\n          const bounds = atlantaBoundary.properties.bounds;\n          if (bounds && bounds.length === 2) {\n            console.log('Fitting map to Atlanta bounds:', bounds);\n            map.current.fitBounds(bounds, {\n              padding: 50,\n              duration: 1000,\n              maxZoom: 11.5\n            });\n          }\n\n          console.log('Atlanta boundary displayed successfully');\n        })\n        .catch(error => {\n          console.error('Error loading Atlanta boundary:', error);\n          // Fallback to mock data if boundary file fails to load\n          if (map.current) {\n            map.current.addSource('atlanta-boundary', {\n              type: 'geojson',\n              data: MOCK_DATA.atlantaBoundary,\n            });\n            map.current.addLayer(MAP_LAYERS.atlantaBoundary);\n          }\n        });\n\n      // Add other data sources\n      map.current.addSource('libraries', {\n        type: 'geojson',\n        data: MOCK_DATA.libraries,\n      });\n\n      map.current.addSource('candidate-sites', {\n        type: 'geojson',\n        data: MOCK_DATA.candidateSites,\n      });\n\n      // Add other layers\n      map.current.addLayer(MAP_LAYERS.libraries);\n      map.current.addLayer(MAP_LAYERS.candidateSites);\n\n      // Add click handlers for popups\n      map.current.on('click', 'libraries', (e) => {\n        if (!map.current || !e.features || !e.features[0]) return;\n        const feature = e.features[0];\n        new mapboxgl.Popup()\n          .setLngLat(e.lngLat)\n          .setHTML(`<strong>${feature.properties?.name}</strong><br/>Type: Library`)\n          .addTo(map.current);\n      });\n\n      map.current.on('click', 'candidate-sites', (e) => {\n        if (!map.current || !e.features || !e.features[0]) return;\n        const feature = e.features[0];\n        new mapboxgl.Popup()\n          .setLngLat(e.lngLat)\n          .setHTML(`\n            <strong>${feature.properties?.name}</strong><br/>\n            Reach: ${feature.properties?.reach} residents<br/>\n            Equity Score: ${feature.properties?.equityScore}\n          `)\n          .addTo(map.current);\n      });\n\n      // Change cursor on hover\n      map.current.on('mouseenter', 'libraries', () => {\n        if (map.current) map.current.getCanvas().style.cursor = 'pointer';\n      });\n      map.current.on('mouseleave', 'libraries', () => {\n        if (map.current) map.current.getCanvas().style.cursor = '';\n      });\n\n      setMapLoaded(true);\n    });\n\n    return () => {\n      map.current?.remove();\n      map.current = null;\n    };\n  }, [mapCenter, mapZoom]);\n\n  // Display recommendations when received\n  useEffect(() => {\n    if (!map.current || !mapLoaded || !recommendations) return;\n\n    // Convert recommendations to GeoJSON features\n    // Note: This is simplified - assumes center point of Atlanta for now\n    // In production, use actual tract geometries\n    const recommendedFeatures = recommendations.recommended_sites.map((site, index) => ({\n      type: 'Feature' as const,\n      geometry: {\n        type: 'Point' as const,\n        // Simplified: use approximate Atlanta center + offset\n        coordinates: [-84.388 + (index * 0.02), 33.749 + (index * 0.02)] as [number, number]\n      },\n      properties: {\n        name: site.name || `Site ${index + 1}`,\n        composite_score: site.composite_score,\n        poverty_rate: site.poverty_rate,\n        no_internet_pct: site.no_internet_pct,\n        recommendation_tier: site.recommendation_tier\n      }\n    }));\n\n    const recommendationsGeoJSON = {\n      type: 'FeatureCollection' as const,\n      features: recommendedFeatures\n    };\n\n    // Add or update recommendations layer\n    if (map.current.getSource('ai-recommendations')) {\n      (map.current.getSource('ai-recommendations') as mapboxgl.GeoJSONSource).setData(recommendationsGeoJSON);\n    } else {\n      map.current.addSource('ai-recommendations', {\n        type: 'geojson',\n        data: recommendationsGeoJSON\n      });\n\n      map.current.addLayer({\n        id: 'ai-recommendations',\n        type: 'circle',\n        source: 'ai-recommendations',\n        paint: {\n          'circle-radius': 10,\n          'circle-color': [\n            'match',\n            ['get', 'recommendation_tier'],\n            'top_priority', '#DC2626',\n            'high_priority', '#F59E0B',\n            'medium_priority', '#3B82F6',\n            '#6B7280'\n          ],\n          'circle-stroke-width': 2,\n          'circle-stroke-color': '#fff'\n        }\n      });\n\n      // Add popup on click\n      map.current.on('click', 'ai-recommendations', (e) => {\n        if (!map.current || !e.features || !e.features[0]) return;\n        const feature = e.features[0];\n        const props = feature.properties;\n\n        new mapboxgl.Popup()\n          .setLngLat(e.lngLat)\n          .setHTML(`\n            <div style=\"font-family: system-ui; padding: 4px;\">\n              <strong style=\"color: #1f2937; font-size: 14px;\">${props?.name}</strong><br/>\n              <div style=\"margin-top: 8px; font-size: 12px; color: #6b7280;\">\n                <div><strong>Score:</strong> ${props?.composite_score}/100</div>\n                <div><strong>Poverty Rate:</strong> ${props?.poverty_rate}%</div>\n                <div><strong>No Internet:</strong> ${props?.no_internet_pct}%</div>\n                <div><strong>Priority:</strong> ${props?.recommendation_tier}</div>\n              </div>\n            </div>\n          `)\n          .addTo(map.current);\n      });\n\n      map.current.on('mouseenter', 'ai-recommendations', () => {\n        if (map.current) map.current.getCanvas().style.cursor = 'pointer';\n      });\n\n      map.current.on('mouseleave', 'ai-recommendations', () => {\n        if (map.current) map.current.getCanvas().style.cursor = '';\n      });\n    }\n\n    // Enable the layer in active layers\n    if (!activeLayers.includes('ai-recommendations')) {\n      setActiveLayers(prev => [...prev, 'ai-recommendations']);\n    }\n  }, [recommendations, mapLoaded]);\n\n  // Toggle layer visibility\n  const toggleLayer = (layerId: string) => {\n    if (!map.current || !mapLoaded) return;\n\n    setActiveLayers((prev) => {\n      const isActive = prev.includes(layerId);\n      const newLayers = isActive\n        ? prev.filter((id) => id !== layerId)\n        : [...prev, layerId];\n\n      // Update map layer visibility\n      if (map.current?.getLayer(layerId)) {\n        map.current.setLayoutProperty(\n          layerId,\n          'visibility',\n          isActive ? 'none' : 'visible'\n        );\n      }\n\n      return newLayers;\n    });\n  };\n\n  return (\n    <section className=\"w-full py-8\">\n      <div className=\"max-w-7xl mx-auto px-6\">\n        <div className=\"civic-card relative\">\n          <h2 className=\"text-2xl font-semibold text-foreground mb-4\">\n            {cityName ? `${cityName} WiFi Network Map` : 'Interactive Site Map'}\n          </h2>\n\n          {/* Map Container */}\n          <div className=\"relative w-full rounded-lg overflow-hidden\" style={{ height: '600px' }}>\n            <div ref={mapContainer} className=\"w-full h-full\" />\n\n            {/* Layer Control */}\n            <MapLayerControl\n              layers={LAYER_CONFIG}\n              activeLayers={activeLayers}\n              onToggle={toggleLayer}\n            />\n\n            {/* API Key Warning */}\n            {!MAPBOX_CONFIG.accessToken && (\n              <div className=\"absolute inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center\">\n                <div className=\"bg-white p-6 rounded-lg max-w-md text-center\">\n                  <p className=\"text-sm font-medium text-gray-900 mb-2\">\n                    Mapbox API Key Required\n                  </p>\n                  <p className=\"text-xs text-gray-600\">\n                    Add NEXT_PUBLIC_MAPBOX_TOKEN to .env.local\n                  </p>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Map Legend */}\n          <div className=\"mt-4 grid grid-cols-3 gap-4 text-sm\">\n            <div>\n              <h4 className=\"font-medium text-foreground mb-2\">Census Data</h4>\n              <div className=\"space-y-1\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 rounded bg-[#19B987]\" />\n                  <span className=\"text-accent\">High Poverty</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 rounded bg-[#2691FF]\" />\n                  <span className=\"text-accent\">Low Internet Access</span>\n                </div>\n              </div>\n            </div>\n            <div>\n              <h4 className=\"font-medium text-foreground mb-2\">Local Assets</h4>\n              <div className=\"space-y-1\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 rounded-full bg-[#7C3AED]\" />\n                  <span className=\"text-accent\">Libraries</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 rounded-full bg-[#DC2626]\" />\n                  <span className=\"text-accent\">Community Centers</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 rounded-full bg-[#7DBDFF]\" />\n                  <span className=\"text-accent\">Transit Stops</span>\n                </div>\n              </div>\n            </div>\n            <div>\n              <h4 className=\"font-medium text-foreground mb-2\">WiFi Sites</h4>\n              <div className=\"space-y-1\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 rounded-full bg-[#2691FF]\" />\n                  <span className=\"text-accent\">Candidate Sites</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 rounded-full bg-[#6B7280]\" />\n                  <span className=\"text-accent\">Existing WiFi</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAGA;AACA;;;AAPA;;;;;;AAUA,oEAAoE;AACpE,MAAM,YAAY;IAChB,iBAAiB;QACf,MAAM;QACN,UAAU;YACR;gBACE,MAAM;gBACN,UAAU;oBACR,MAAM;oBACN,aAAa;wBAAC;4BACZ;gCAAC,CAAC;gCAAO;6BAAM;4BACf;gCAAC,CAAC;gCAAO;6BAAM;4BACf;gCAAC,CAAC;gCAAO;6BAAM;4BACf;gCAAC,CAAC;gCAAO;6BAAM;4BACf;gCAAC,CAAC;gCAAO;6BAAM;yBAChB;qBAAC;gBACJ;gBACA,YAAY,CAAC;YACf;SACD;IACH;IACA,WAAW;QACT,MAAM;QACN,UAAU;YACR;gBACE,MAAM;gBACN,UAAU;oBAAE,MAAM;oBAAkB,aAAa;wBAAC,CAAC;wBAAQ;qBAAO;gBAAC;gBACnE,YAAY;oBAAE,MAAM;oBAAmB,MAAM;gBAAU;YACzD;YACA;gBACE,MAAM;gBACN,UAAU;oBAAE,MAAM;oBAAkB,aAAa;wBAAC,CAAC;wBAAQ;qBAAO;gBAAC;gBACnE,YAAY;oBAAE,MAAM;oBAAqB,MAAM;gBAAU;YAC3D;SACD;IACH;IACA,gBAAgB;QACd,MAAM;QACN,UAAU;YACR;gBACE,MAAM;gBACN,UAAU;oBAAE,MAAM;oBAAkB,aAAa;wBAAC,CAAC;wBAAQ;qBAAO;gBAAC;gBACnE,YAAY;oBAAE,MAAM;oBAAoB,OAAO;oBAAM,aAAa;gBAAI;YACxE;SACD;IACH;AACF;AAEA,MAAM,eAAe;IACnB;QAAE,IAAI;QAAoB,OAAO;QAAoB,OAAO;IAAU;IACtE;QAAE,IAAI;QAAkB,OAAO;QAAgB,OAAO;QAAW,aAAa;IAA4B;IAC1G;QAAE,IAAI;QAAmB,OAAO;QAAmB,OAAO;QAAW,aAAa;IAA8B;IAChH;QAAE,IAAI;QAAiB,OAAO;QAAgB,OAAO;QAAW,aAAa;IAAyB;IACtG;QAAE,IAAI;QAAa,OAAO;QAAa,OAAO;IAAU;IACxD;QAAE,IAAI;QAAqB,OAAO;QAAqB,OAAO;IAAU;IACxE;QAAE,IAAI;QAAiB,OAAO;QAAiB,OAAO;IAAU;IAChE;QAAE,IAAI;QAAmB,OAAO;QAAmB,OAAO;IAAU;IACpE;QAAE,IAAI;QAAiB,OAAO;QAAiB,OAAO;IAAU;CACjE;AAEc,SAAS,eAAe,EACrC,UAAU,EACV,QAAQ,EACR,eAAe,EAKhB;;IACC,MAAM,eAAe,IAAA,uKAAM,EAAiB;IAC5C,MAAM,MAAM,IAAA,uKAAM,EAAsB;IACxC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAW;QACzD;QACA;QACA;KACD;IACD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,sDAAsD;IACtD,MAAM,YAAY,cAAc;QAAC,2IAAa,CAAC,aAAa,CAAC,GAAG;QAAE,2IAAa,CAAC,aAAa,CAAC,GAAG;KAAC;IAClG,MAAM,UAAU,aAAa,OAAO,2IAAa,CAAC,aAAa,CAAC,IAAI;IAEpE,iBAAiB;IACjB,IAAA,0KAAS;oCAAC;YACR,IAAI,CAAC,aAAa,OAAO,IAAI,IAAI,OAAO,EAAE;YAE1C,kKAAQ,CAAC,WAAW,GAAG,2IAAa,CAAC,WAAW;YAEhD,IAAI,OAAO,GAAG,IAAI,kKAAQ,CAAC,GAAG,CAAC;gBAC7B,WAAW,aAAa,OAAO;gBAC/B,OAAO,2IAAa,CAAC,YAAY;gBACjC,QAAQ;gBACR,MAAM;YACR;YAEA,IAAI,OAAO,CAAC,EAAE,CAAC;4CAAQ;oBACrB,IAAI,CAAC,IAAI,OAAO,EAAE;oBAElB,+DAA+D;oBAC/D,MAAM,6BACH,IAAI;oDAAC,CAAA,WAAY,SAAS,IAAI;mDAC9B,IAAI;oDAAC,CAAA;4BACJ,IAAI,CAAC,IAAI,OAAO,EAAE;4BAElB,QAAQ,GAAG,CAAC;4BAEZ,0DAA0D;4BAC1D,IAAI,OAAO,CAAC,SAAS,CAAC,oBAAoB;gCACxC,MAAM;gCACN,MAAM;oCACJ,MAAM;oCACN,UAAU;wCAAC;qCAAgB;gCAC7B;4BACF;4BAEA,qCAAqC;4BACrC,IAAI,OAAO,CAAC,QAAQ,CAAC;gCACnB,IAAI;gCACJ,MAAM;gCACN,QAAQ;gCACR,OAAO;oCACL,cAAc;oCACd,cAAc;oCACd,gBAAgB;gCAClB;4BACF;4BAEA,kDAAkD;4BAClD,MAAM,SAAS,gBAAgB,UAAU,CAAC,MAAM;4BAChD,IAAI,UAAU,OAAO,MAAM,KAAK,GAAG;gCACjC,QAAQ,GAAG,CAAC,kCAAkC;gCAC9C,IAAI,OAAO,CAAC,SAAS,CAAC,QAAQ;oCAC5B,SAAS;oCACT,UAAU;oCACV,SAAS;gCACX;4BACF;4BAEA,QAAQ,GAAG,CAAC;wBACd;mDACC,KAAK;oDAAC,CAAA;4BACL,QAAQ,KAAK,CAAC,mCAAmC;4BACjD,uDAAuD;4BACvD,IAAI,IAAI,OAAO,EAAE;gCACf,IAAI,OAAO,CAAC,SAAS,CAAC,oBAAoB;oCACxC,MAAM;oCACN,MAAM,UAAU,eAAe;gCACjC;gCACA,IAAI,OAAO,CAAC,QAAQ,CAAC,wIAAU,CAAC,eAAe;4BACjD;wBACF;;oBAEF,yBAAyB;oBACzB,IAAI,OAAO,CAAC,SAAS,CAAC,aAAa;wBACjC,MAAM;wBACN,MAAM,UAAU,SAAS;oBAC3B;oBAEA,IAAI,OAAO,CAAC,SAAS,CAAC,mBAAmB;wBACvC,MAAM;wBACN,MAAM,UAAU,cAAc;oBAChC;oBAEA,mBAAmB;oBACnB,IAAI,OAAO,CAAC,QAAQ,CAAC,wIAAU,CAAC,SAAS;oBACzC,IAAI,OAAO,CAAC,QAAQ,CAAC,wIAAU,CAAC,cAAc;oBAE9C,gCAAgC;oBAChC,IAAI,OAAO,CAAC,EAAE,CAAC,SAAS;oDAAa,CAAC;4BACpC,IAAI,CAAC,IAAI,OAAO,IAAI,CAAC,EAAE,QAAQ,IAAI,CAAC,EAAE,QAAQ,CAAC,EAAE,EAAE;4BACnD,MAAM,UAAU,EAAE,QAAQ,CAAC,EAAE;4BAC7B,IAAI,kKAAQ,CAAC,KAAK,GACf,SAAS,CAAC,EAAE,MAAM,EAClB,OAAO,CAAC,CAAC,QAAQ,EAAE,QAAQ,UAAU,EAAE,KAAK,2BAA2B,CAAC,EACxE,KAAK,CAAC,IAAI,OAAO;wBACtB;;oBAEA,IAAI,OAAO,CAAC,EAAE,CAAC,SAAS;oDAAmB,CAAC;4BAC1C,IAAI,CAAC,IAAI,OAAO,IAAI,CAAC,EAAE,QAAQ,IAAI,CAAC,EAAE,QAAQ,CAAC,EAAE,EAAE;4BACnD,MAAM,UAAU,EAAE,QAAQ,CAAC,EAAE;4BAC7B,IAAI,kKAAQ,CAAC,KAAK,GACf,SAAS,CAAC,EAAE,MAAM,EAClB,OAAO,CAAC,CAAC;oBACA,EAAE,QAAQ,UAAU,EAAE,KAAK;mBAC5B,EAAE,QAAQ,UAAU,EAAE,MAAM;0BACrB,EAAE,QAAQ,UAAU,EAAE,YAAY;UAClD,CAAC,EACA,KAAK,CAAC,IAAI,OAAO;wBACtB;;oBAEA,yBAAyB;oBACzB,IAAI,OAAO,CAAC,EAAE,CAAC,cAAc;oDAAa;4BACxC,IAAI,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,GAAG;wBAC1D;;oBACA,IAAI,OAAO,CAAC,EAAE,CAAC,cAAc;oDAAa;4BACxC,IAAI,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,GAAG;wBAC1D;;oBAEA,aAAa;gBACf;;YAEA;4CAAO;oBACL,IAAI,OAAO,EAAE;oBACb,IAAI,OAAO,GAAG;gBAChB;;QACF;mCAAG;QAAC;QAAW;KAAQ;IAEvB,wCAAwC;IACxC,IAAA,0KAAS;oCAAC;YACR,IAAI,CAAC,IAAI,OAAO,IAAI,CAAC,aAAa,CAAC,iBAAiB;YAEpD,8CAA8C;YAC9C,qEAAqE;YACrE,6CAA6C;YAC7C,MAAM,sBAAsB,gBAAgB,iBAAiB,CAAC,GAAG;gEAAC,CAAC,MAAM,QAAU,CAAC;wBAClF,MAAM;wBACN,UAAU;4BACR,MAAM;4BACN,sDAAsD;4BACtD,aAAa;gCAAC,CAAC,SAAU,QAAQ;gCAAO,SAAU,QAAQ;6BAAM;wBAClE;wBACA,YAAY;4BACV,MAAM,KAAK,IAAI,IAAI,CAAC,KAAK,EAAE,QAAQ,GAAG;4BACtC,iBAAiB,KAAK,eAAe;4BACrC,cAAc,KAAK,YAAY;4BAC/B,iBAAiB,KAAK,eAAe;4BACrC,qBAAqB,KAAK,mBAAmB;wBAC/C;oBACF,CAAC;;YAED,MAAM,yBAAyB;gBAC7B,MAAM;gBACN,UAAU;YACZ;YAEA,sCAAsC;YACtC,IAAI,IAAI,OAAO,CAAC,SAAS,CAAC,uBAAuB;gBAC9C,IAAI,OAAO,CAAC,SAAS,CAAC,sBAAiD,OAAO,CAAC;YAClF,OAAO;gBACL,IAAI,OAAO,CAAC,SAAS,CAAC,sBAAsB;oBAC1C,MAAM;oBACN,MAAM;gBACR;gBAEA,IAAI,OAAO,CAAC,QAAQ,CAAC;oBACnB,IAAI;oBACJ,MAAM;oBACN,QAAQ;oBACR,OAAO;wBACL,iBAAiB;wBACjB,gBAAgB;4BACd;4BACA;gCAAC;gCAAO;6BAAsB;4BAC9B;4BAAgB;4BAChB;4BAAiB;4BACjB;4BAAmB;4BACnB;yBACD;wBACD,uBAAuB;wBACvB,uBAAuB;oBACzB;gBACF;gBAEA,qBAAqB;gBACrB,IAAI,OAAO,CAAC,EAAE,CAAC,SAAS;gDAAsB,CAAC;wBAC7C,IAAI,CAAC,IAAI,OAAO,IAAI,CAAC,EAAE,QAAQ,IAAI,CAAC,EAAE,QAAQ,CAAC,EAAE,EAAE;wBACnD,MAAM,UAAU,EAAE,QAAQ,CAAC,EAAE;wBAC7B,MAAM,QAAQ,QAAQ,UAAU;wBAEhC,IAAI,kKAAQ,CAAC,KAAK,GACf,SAAS,CAAC,EAAE,MAAM,EAClB,OAAO,CAAC,CAAC;;+DAE2C,EAAE,OAAO,KAAK;;6CAEhC,EAAE,OAAO,gBAAgB;oDAClB,EAAE,OAAO,aAAa;mDACvB,EAAE,OAAO,gBAAgB;gDAC5B,EAAE,OAAO,oBAAoB;;;UAGnE,CAAC,EACA,KAAK,CAAC,IAAI,OAAO;oBACtB;;gBAEA,IAAI,OAAO,CAAC,EAAE,CAAC,cAAc;gDAAsB;wBACjD,IAAI,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,GAAG;oBAC1D;;gBAEA,IAAI,OAAO,CAAC,EAAE,CAAC,cAAc;gDAAsB;wBACjD,IAAI,IAAI,OAAO,EAAE,IAAI,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,GAAG;oBAC1D;;YACF;YAEA,oCAAoC;YACpC,IAAI,CAAC,aAAa,QAAQ,CAAC,uBAAuB;gBAChD;gDAAgB,CAAA,OAAQ;+BAAI;4BAAM;yBAAqB;;YACzD;QACF;mCAAG;QAAC;QAAiB;KAAU;IAE/B,0BAA0B;IAC1B,MAAM,cAAc,CAAC;QACnB,IAAI,CAAC,IAAI,OAAO,IAAI,CAAC,WAAW;QAEhC,gBAAgB,CAAC;YACf,MAAM,WAAW,KAAK,QAAQ,CAAC;YAC/B,MAAM,YAAY,WACd,KAAK,MAAM,CAAC,CAAC,KAAO,OAAO,WAC3B;mBAAI;gBAAM;aAAQ;YAEtB,8BAA8B;YAC9B,IAAI,IAAI,OAAO,EAAE,SAAS,UAAU;gBAClC,IAAI,OAAO,CAAC,iBAAiB,CAC3B,SACA,cACA,WAAW,SAAS;YAExB;YAEA,OAAO;QACT;IACF;IAEA,qBACE,6LAAC;QAAQ,WAAU;kBACjB,cAAA,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCACX,WAAW,GAAG,SAAS,iBAAiB,CAAC,GAAG;;;;;;kCAI/C,6LAAC;wBAAI,WAAU;wBAA6C,OAAO;4BAAE,QAAQ;wBAAQ;;0CACnF,6LAAC;gCAAI,KAAK;gCAAc,WAAU;;;;;;0CAGlC,6LAAC,4IAAe;gCACd,QAAQ;gCACR,cAAc;gCACd,UAAU;;;;;;4BAIX,CAAC,2IAAa,CAAC,WAAW,kBACzB,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAE,WAAU;sDAAyC;;;;;;sDAGtD,6LAAC;4CAAE,WAAU;sDAAwB;;;;;;;;;;;;;;;;;;;;;;;kCAS7C,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;;kDACC,6LAAC;wCAAG,WAAU;kDAAmC;;;;;;kDACjD,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;;;;;;kEACf,6LAAC;wDAAK,WAAU;kEAAc;;;;;;;;;;;;0DAEhC,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;;;;;;kEACf,6LAAC;wDAAK,WAAU;kEAAc;;;;;;;;;;;;;;;;;;;;;;;;0CAIpC,6LAAC;;kDACC,6LAAC;wCAAG,WAAU;kDAAmC;;;;;;kDACjD,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;;;;;;kEACf,6LAAC;wDAAK,WAAU;kEAAc;;;;;;;;;;;;0DAEhC,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;;;;;;kEACf,6LAAC;wDAAK,WAAU;kEAAc;;;;;;;;;;;;0DAEhC,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;;;;;;kEACf,6LAAC;wDAAK,WAAU;kEAAc;;;;;;;;;;;;;;;;;;;;;;;;0CAIpC,6LAAC;;kDACC,6LAAC;wCAAG,WAAU;kDAAmC;;;;;;kDACjD,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;;;;;;kEACf,6LAAC;wDAAK,WAAU;kEAAc;;;;;;;;;;;;0DAEhC,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;;;;;;kEACf,6LAAC;wDAAK,WAAU;kEAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAShD;GA3VwB;KAAA"}},
    {"offset": {"line": 2168, "column": 0}, "map": {"version":3,"sources":["file:///Users/wes/Desktop/Project/ImsoATL/app/frontend/components/SiteCard.tsx"],"sourcesContent":["import type { RecommendedSite } from '@/lib/types';\n\ntype SiteCardProps = {\n  rank: number;\n  site: RecommendedSite;\n};\n\n// Priority tier configuration\nconst tierConfig = {\n  top_priority: {\n    label: 'Critical',\n    color: '#ef4444',\n    textColor: 'text-red-500',\n  },\n  high_priority: {\n    label: 'High',\n    color: '#f59e0b',\n    textColor: 'text-amber-500',\n  },\n  medium_priority: {\n    label: 'Medium',\n    color: '#3b82f6',\n    textColor: 'text-blue-500',\n  },\n  low_priority: {\n    label: 'Low',\n    color: '#6b7280',\n    textColor: 'text-gray-500',\n  },\n};\n\n// Generate reasoning bullets from site metrics\nfunction generateReasoning(site: RecommendedSite): string[] {\n  const reasons: string[] = [];\n\n  if (site.poverty_rate && site.poverty_rate > 20) {\n    reasons.push(`High poverty area (${site.poverty_rate.toFixed(1)}% below poverty line)`);\n  }\n\n  if (site.no_internet_pct && site.no_internet_pct > 15) {\n    reasons.push(`Significant digital divide (${site.no_internet_pct.toFixed(1)}% without internet)`);\n  }\n\n  if (site.nearby_anchor_count && site.nearby_anchor_count > 0) {\n    reasons.push(`${site.nearby_anchor_count} nearby civic asset${site.nearby_anchor_count > 1 ? 's' : ''} for deployment`);\n  }\n\n  if (site.composite_score >= 80) {\n    reasons.push('Critical need - immediate deployment recommended');\n  }\n\n  if (site.student_population && site.student_population > 0) {\n    reasons.push(`Serves ${site.student_population.toLocaleString()} students`);\n  }\n\n  // Fallback if no specific reasons\n  if (reasons.length === 0) {\n    reasons.push('Meets multiple deployment criteria');\n  }\n\n  return reasons;\n}\n\n// Determine icon based on nearby anchors\nfunction getIcon(site: RecommendedSite): string {\n  if (site.nearest_library) return 'ðŸ“š';\n  if (site.nearest_community_center) return 'ðŸ›ï¸';\n  if (site.nearby_anchors && site.nearby_anchors.length > 0) {\n    const firstAsset = site.nearby_anchors[0];\n    if (firstAsset.type === 'library') return 'ðŸ“š';\n    if (firstAsset.type === 'community_center') return 'ðŸ›ï¸';\n    if (firstAsset.type === 'school') return 'ðŸ«';\n    if (firstAsset.type === 'transit') return 'ðŸš‡';\n  }\n  return 'ðŸ“'; // Default location pin\n}\n\nexport default function SiteCard({ rank, site }: SiteCardProps) {\n  const tier = tierConfig[site.recommendation_tier] || tierConfig.low_priority;\n  const reasoning = generateReasoning(site);\n  const icon = getIcon(site);\n  const displayName = site.name || `Census Tract ${site.tract_id}`;\n\n  return (\n    <div\n      className=\"civic-card border-l-4\"\n      style={{ borderLeftColor: tier.color }}\n    >\n      <div className=\"flex items-start gap-3\">\n        {/* Rank Badge */}\n        <div\n          className=\"shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-white font-semibold text-sm\"\n          style={{ backgroundColor: tier.color }}\n        >\n          {rank}\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1\">\n          <div className=\"flex items-start justify-between\">\n            <div>\n              <h3 className=\"text-base font-semibold text-foreground\">{displayName}</h3>\n              <div className=\"flex items-center gap-2 mt-1\">\n                <span\n                  className={`text-xs font-medium px-2 py-0.5 rounded ${tier.textColor}`}\n                  style={{ backgroundColor: `${tier.color}20` }}\n                >\n                  {tier.label} Priority\n                </span>\n                <span className=\"text-xs text-muted\">\n                  Tract {site.tract_id}\n                </span>\n              </div>\n            </div>\n            <span className=\"text-2xl\">{icon}</span>\n          </div>\n\n          {/* Metrics */}\n          <div className=\"grid grid-cols-2 gap-3 mt-3\">\n            <div>\n              <div className=\"text-lg font-semibold text-civic-green\">\n                {site.total_population?.toLocaleString() || '0'}\n              </div>\n              <div className=\"text-xs text-accent\">People Helped</div>\n            </div>\n            <div>\n              <div className=\"text-lg font-semibold text-civic-blue\">\n                {site.composite_score?.toFixed(1) || '0.0'}\n              </div>\n              <div className=\"text-xs text-accent\">Score</div>\n            </div>\n          </div>\n\n          {/* Reasoning */}\n          <div className=\"mt-3 pt-3 border-t border-border\">\n            <p className=\"text-xs font-medium text-muted uppercase tracking-wider mb-2\">\n              Why this site?\n            </p>\n            <ul className=\"space-y-1\">\n              {reasoning.slice(0, 3).map((reason, idx) => (\n                <li key={idx} className=\"text-xs text-accent flex gap-2\">\n                  <span className=\"text-civic-green flex-shrink-0\">âœ“</span>\n                  <span>{reason}</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2461, "column": 0}, "map": {"version":3,"sources":["file:///Users/wes/Desktop/Project/ImsoATL/app/frontend/components/RecommendationsSidebar.tsx"],"sourcesContent":["'use client';\n\nimport SiteCard from './SiteCard';\nimport type { DeploymentPlan } from '@/lib/types';\n\ninterface RecommendationsSidebarProps {\n  isOpen: boolean;\n  onClose: () => void;\n  deploymentPlan: DeploymentPlan | null;\n}\n\nexport default function RecommendationsSidebar({\n  isOpen,\n  onClose,\n  deploymentPlan\n}: RecommendationsSidebarProps) {\n  return (\n    <>\n      {/* Backdrop (optional, for mobile) */}\n      {isOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/30 z-30 lg:hidden\"\n          onClick={onClose}\n        />\n      )}\n\n      {/* Right Sidebar */}\n      <div\n        className={`fixed top-0 right-0 h-full w-96 bg-surface border-l border-border z-40 transform transition-transform duration-300 ease-in-out ${\n          isOpen ? 'translate-x-0' : 'translate-x-full'\n        }`}\n      >\n        <div className=\"flex flex-col h-full\">\n          {/* Header */}\n          <div className=\"px-6 py-4 border-b border-border\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h2 className=\"text-lg font-semibold text-foreground\">\n                  WiFi Deployment Sites\n                </h2>\n                <p className=\"text-sm text-accent\">\n                  {deploymentPlan?.recommended_sites_count || 0} sites recommended\n                </p>\n              </div>\n              <button\n                onClick={onClose}\n                className=\"p-1 rounded-lg hover:bg-surface-hover transition-colors text-muted hover:text-foreground\"\n                title=\"Close recommendations\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          {/* Content */}\n          {deploymentPlan ? (\n            <>\n              {/* Impact Summary */}\n              <div className=\"px-6 py-4 border-b border-border bg-surface-hover\">\n                <h3 className=\"text-xs font-semibold text-muted uppercase tracking-wider mb-3\">\n                  Projected Impact\n                </h3>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  <div>\n                    <div className=\"text-2xl font-bold text-civic-green\">\n                      {deploymentPlan.projected_impact.total_population_served?.toLocaleString() || '0'}\n                    </div>\n                    <div className=\"text-xs text-accent mt-1\">People Reached</div>\n                  </div>\n                  <div>\n                    <div className=\"text-2xl font-bold text-civic-blue\">\n                      {deploymentPlan.projected_impact.households_without_internet_served?.toLocaleString() || '0'}\n                    </div>\n                    <div className=\"text-xs text-accent mt-1\">Households Connected</div>\n                  </div>\n                </div>\n                {deploymentPlan.projected_impact.residents_in_poverty_served && (\n                  <div className=\"mt-3 pt-3 border-t border-border\">\n                    <div className=\"text-xl font-bold\" style={{ color: 'var(--civic-green)' }}>\n                      {deploymentPlan.projected_impact.residents_in_poverty_served.toLocaleString()}\n                    </div>\n                    <div className=\"text-xs text-accent mt-1\">Residents in Poverty Served</div>\n                  </div>\n                )}\n              </div>\n\n              {/* Scrollable Site List */}\n              <div className=\"flex-1 overflow-y-auto px-6 py-4 space-y-3\">\n                {deploymentPlan.recommended_sites.map((site, index) => (\n                  <SiteCard\n                    key={site.tract_id}\n                    site={site}\n                    rank={index + 1}\n                  />\n                ))}\n              </div>\n            </>\n          ) : (\n            /* Empty State */\n            <div className=\"flex-1 flex items-center justify-center px-6\">\n              <div className=\"text-center\">\n                <div className=\"text-4xl mb-3\">ðŸ“Š</div>\n                <p className=\"text-foreground font-medium\">No recommendations yet</p>\n                <p className=\"text-accent text-sm mt-2\">\n                  Ask the AI assistant about WiFi deployment to see ranked sites\n                </p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAWe,SAAS,uBAAuB,EAC7C,MAAM,EACN,OAAO,EACP,cAAc,EACc;IAC5B,qBACE;;YAEG,wBACC,6LAAC;gBACC,WAAU;gBACV,SAAS;;;;;;0BAKb,6LAAC;gBACC,WAAW,CAAC,+HAA+H,EACzI,SAAS,kBAAkB,oBAC3B;0BAEF,cAAA,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;0DACC,6LAAC;gDAAG,WAAU;0DAAwC;;;;;;0DAGtD,6LAAC;gDAAE,WAAU;;oDACV,gBAAgB,2BAA2B;oDAAE;;;;;;;;;;;;;kDAGlD,6LAAC;wCACC,SAAS;wCACT,WAAU;wCACV,OAAM;kDAEN,cAAA,6LAAC;4CAAI,WAAU;4CAAU,MAAK;4CAAO,QAAO;4CAAe,SAAQ;sDACjE,cAAA,6LAAC;gDAAK,eAAc;gDAAQ,gBAAe;gDAAQ,aAAa;gDAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;wBAO5E,+BACC;;8CAEE,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAG,WAAU;sDAAiE;;;;;;sDAG/E,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;;sEACC,6LAAC;4DAAI,WAAU;sEACZ,eAAe,gBAAgB,CAAC,uBAAuB,EAAE,oBAAoB;;;;;;sEAEhF,6LAAC;4DAAI,WAAU;sEAA2B;;;;;;;;;;;;8DAE5C,6LAAC;;sEACC,6LAAC;4DAAI,WAAU;sEACZ,eAAe,gBAAgB,CAAC,kCAAkC,EAAE,oBAAoB;;;;;;sEAE3F,6LAAC;4DAAI,WAAU;sEAA2B;;;;;;;;;;;;;;;;;;wCAG7C,eAAe,gBAAgB,CAAC,2BAA2B,kBAC1D,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAI,WAAU;oDAAoB,OAAO;wDAAE,OAAO;oDAAqB;8DACrE,eAAe,gBAAgB,CAAC,2BAA2B,CAAC,cAAc;;;;;;8DAE7E,6LAAC;oDAAI,WAAU;8DAA2B;;;;;;;;;;;;;;;;;;8CAMhD,6LAAC;oCAAI,WAAU;8CACZ,eAAe,iBAAiB,CAAC,GAAG,CAAC,CAAC,MAAM,sBAC3C,6LAAC,qIAAQ;4CAEP,MAAM;4CACN,MAAM,QAAQ;2CAFT,KAAK,QAAQ;;;;;;;;;;;2CAQ1B,eAAe,iBACf,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;kDAAgB;;;;;;kDAC/B,6LAAC;wCAAE,WAAU;kDAA8B;;;;;;kDAC3C,6LAAC;wCAAE,WAAU;kDAA2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUxD;KAxGwB"}},
    {"offset": {"line": 2742, "column": 0}, "map": {"version":3,"sources":["file:///Users/wes/Desktop/Project/ImsoATL/app/frontend/app/dashboard/%5Bcity%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, useRef } from 'react';\nimport DashboardHeader from '@/components/DashboardHeader';\nimport ChatSidebar from '@/components/ChatSidebar';\nimport PrioritySliders from '@/components/PrioritySliders';\nimport InteractiveMap from '@/components/InteractiveMap';\nimport RecommendationsSidebar from '@/components/RecommendationsSidebar';\nimport Footer from '@/components/Footer';\nimport type { DeploymentPlan } from '@/lib/types';\n\ntype CityData = {\n  id: number;\n  name: string;\n  state: string;\n  slug: string;\n  coords: [number, number];\n};\n\nexport default function DashboardPage({ params }: { params: { city: string } }) {\n  const [cityData, setCityData] = useState<CityData | null>(null);\n  const [isChatOpen, setIsChatOpen] = useState(true);\n  const [isRecommendationsOpen, setIsRecommendationsOpen] = useState(false);\n  const [recommendations, setRecommendations] = useState<DeploymentPlan | null>(null);\n  const mapRef = useRef<{ showRecommendations: (plan: DeploymentPlan) => void } | null>(null);\n\n  useEffect(() => {\n    // Retrieve city data from localStorage\n    const storedCity = localStorage.getItem('selectedCity');\n    if (storedCity) {\n      const city = JSON.parse(storedCity) as CityData;\n      setCityData(city);\n    }\n  }, []);\n\n  const handleRecommendationsReceived = (plan: DeploymentPlan) => {\n    setRecommendations(plan);\n    setIsRecommendationsOpen(true); // Auto-open recommendations sidebar\n    // Notify map component to show recommendations\n    if (mapRef.current && mapRef.current.showRecommendations) {\n      mapRef.current.showRecommendations(plan);\n    }\n  };\n\n  if (!cityData) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <p className=\"text-foreground\">Loading dashboard...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background flex\">\n      {/* Chat Sidebar (Left) */}\n      <ChatSidebar\n        isOpen={isChatOpen}\n        onClose={() => setIsChatOpen(false)}\n        cityName={cityData.name}\n        onRecommendationsReceived={handleRecommendationsReceived}\n      />\n\n      {/* Recommendations Sidebar (Right) */}\n      <RecommendationsSidebar\n        isOpen={isRecommendationsOpen}\n        onClose={() => setIsRecommendationsOpen(false)}\n        deploymentPlan={recommendations}\n      />\n\n      {/* Main Dashboard - shifts when sidebars are open */}\n      <div\n        className={`flex-1 transition-all duration-300 ${\n          isChatOpen ? 'ml-[32rem]' : 'ml-0'\n        } ${\n          isRecommendationsOpen ? 'mr-96' : 'mr-0'\n        }`}\n      >\n        <DashboardHeader\n          onToggleChat={() => setIsChatOpen(!isChatOpen)}\n          cityName={cityData.name}\n        />\n\n        <div className=\"relative\">\n          {/* <PrioritySliders /> */}\n          <InteractiveMap\n            cityCenter={cityData.coords}\n            cityName={cityData.name}\n            recommendations={recommendations}\n          />\n          {/* <Footer /> */}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AACA;;;AAPA;;;;;;AAmBe,SAAS,cAAc,EAAE,MAAM,EAAgC;;IAC5E,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAkB;IAC1D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,yKAAQ,EAAC;IACnE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAwB;IAC9E,MAAM,SAAS,IAAA,uKAAM,EAAiE;IAEtF,IAAA,0KAAS;mCAAC;YACR,uCAAuC;YACvC,MAAM,aAAa,aAAa,OAAO,CAAC;YACxC,IAAI,YAAY;gBACd,MAAM,OAAO,KAAK,KAAK,CAAC;gBACxB,YAAY;YACd;QACF;kCAAG,EAAE;IAEL,MAAM,gCAAgC,CAAC;QACrC,mBAAmB;QACnB,yBAAyB,OAAO,oCAAoC;QACpE,+CAA+C;QAC/C,IAAI,OAAO,OAAO,IAAI,OAAO,OAAO,CAAC,mBAAmB,EAAE;YACxD,OAAO,OAAO,CAAC,mBAAmB,CAAC;QACrC;IACF;IAEA,IAAI,CAAC,UAAU;QACb,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAE,WAAU;0BAAkB;;;;;;;;;;;IAGrC;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC,wIAAW;gBACV,QAAQ;gBACR,SAAS,IAAM,cAAc;gBAC7B,UAAU,SAAS,IAAI;gBACvB,2BAA2B;;;;;;0BAI7B,6LAAC,mJAAsB;gBACrB,QAAQ;gBACR,SAAS,IAAM,yBAAyB;gBACxC,gBAAgB;;;;;;0BAIlB,6LAAC;gBACC,WAAW,CAAC,mCAAmC,EAC7C,aAAa,eAAe,OAC7B,CAAC,EACA,wBAAwB,UAAU,QAClC;;kCAEF,6LAAC,4IAAe;wBACd,cAAc,IAAM,cAAc,CAAC;wBACnC,UAAU,SAAS,IAAI;;;;;;kCAGzB,6LAAC;wBAAI,WAAU;kCAEb,cAAA,6LAAC,2IAAc;4BACb,YAAY,SAAS,MAAM;4BAC3B,UAAU,SAAS,IAAI;4BACvB,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;AAO7B;GA3EwB;KAAA"}}]
}